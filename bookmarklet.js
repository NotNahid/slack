javascript:(function(){if(document.getElementById('slack-hover-toggle'))return;const b=document.createElement('button');b.id='slack-hover-toggle';b.style="position:fixed;bottom:100px;left:50px;z-index:999999;background:linear-gradient(135deg,#e01e5a,#ff3864);color:white;padding:10px 16px;border:none;border-radius:50px;cursor:pointer;font-weight:bold;font-size:13px;box-shadow:0 5px 15px rgba(0,0,0,0.3);transition:transform 0.1s ease;user-select:none;font-family:sans-serif;";b.textContent='Hover Delete: OFF';document.body.appendChild(b);let running=false,busy=false,lastMessageKey=null,cooldown=false,HOVER_DELAY=1200,hoverTimer=null,observer=null,status=null,dragging=false,offsetX=0,offsetY=0,startX=0,startY=0;b.onmousedown=e=>{const rect=b.getBoundingClientRect();b.style.left=rect.left+'px';b.style.top=rect.top+'px';b.style.bottom='auto';b.style.right='auto';dragging=true;offsetX=e.clientX-b.offsetLeft;offsetY=e.clientY-b.offsetTop;startX=e.clientX;startY=e.clientY;e.preventDefault();};document.onmousemove=e=>{if(dragging){b.style.left=(e.clientX-offsetX)+'px';b.style.top=(e.clientY-offsetY)+'px';if(status){status.style.left=b.style.left;status.style.top=(parseInt(b.style.top)-40)+'px';}}};document.onmouseup=e=>{dragging=false;};b.onmouseover=()=>b.style.transform='scale(1.1)';b.onmouseout=()=>b.style.transform='scale(1)';b.onclick=e=>{if(Math.hypot(e.clientX-startX,e.clientY-startY)>5)return;if(e.shiftKey){let newDelay=prompt("Set hover delay in ms:",HOVER_DELAY);if(newDelay)HOVER_DELAY=parseInt(newDelay);}else{if(!running){running=true;b.textContent='Hover Delete: ON';b.style.background='linear-gradient(135deg,#1abc9c,#16a085)';status=document.createElement("div");status.style="position:fixed;left:"+b.style.left+";top:"+(parseInt(b.style.top)-40)+"px;background:#111;color:#fff;padding:8px 12px;z-index:999999;font-size:12px;border-radius:8px;max-width:260px;box-shadow:0 5px 15px rgba(0,0,0,0.3);pointer-events:none;";status.textContent="Hover over a message for ~"+HOVER_DELAY+"ms to delete";document.body.appendChild(status);observer=new MutationObserver(()=>{if(busy||cooldown)return;const btnEl=document.querySelector('[data-qa="more_message_actions"]');if(!btnEl)return;const message=btnEl.closest('[role="listitem"]');if(!message)return;const key=message.getAttribute("data-item-key");if(!key||key===lastMessageKey)return;if(hoverTimer)clearTimeout(hoverTimer);hoverTimer=setTimeout(async()=>{busy=true;lastMessageKey=key;message.style.outline="3px solid red";btnEl.click();await new Promise(r=>setTimeout(r,300));const deleteMenu=document.querySelector('[data-qa="delete_message"]');if(deleteMenu){deleteMenu.click();status.textContent="Deleting...";await new Promise(r=>setTimeout(r,300));}else{status.textContent="Delete menu not found";message.style.outline="";busy=false;return;}const confirmBtn=document.querySelector('[data-qa="dialog_go"]');if(confirmBtn){confirmBtn.click();status.textContent="Deleted!";}message.style.transition="outline 0.5s";setTimeout(()=>message.style.outline="",2000);setTimeout(()=>lastMessageKey=null,500);cooldown=true;await new Promise(r=>setTimeout(r,800));cooldown=false;busy=false;},HOVER_DELAY);});observer.observe(document.body,{childList:true,subtree:true});}else{running=false;b.textContent='Hover Delete: OFF';b.style.background='linear-gradient(135deg,#e01e5a,#ff3864)';if(observer)observer.disconnect();if(hoverTimer)clearTimeout(hoverTimer);if(status)status.remove();busy=false;lastMessageKey=null;cooldown=false;}}};})();
